<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Welcome to My Webpage — Subrata Pramanik</title>

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <style>
    :root{
      --accent1:#345a96;    /* Deep blue matching flower */
      --accent2:#2a3d63;    /* Darkened blue */
      --bg:#eef3fb;         /* Light blue background */
      --card: rgba(255,255,255,0.97);
      --muted:#4a4a4a;
      --max-width:1100px;

      /* Blue flower background */
      --flower-img: url("images/flower_hd.png");
    }

    html,body{ margin:0; padding:0; font-family: "Georgia", serif; background: var(--bg); scroll-behavior:smooth; color:#111; }

    /* LEFT + RIGHT FLORAL BACKGROUNDS */
    body::before, body::after{
      content:"";
      position:fixed;
      top:0; bottom:0;
      width:200px;
      z-index:-1;
      pointer-events:none;
      background-repeat:no-repeat;
      background-size:cover;
      background-position:center;
      opacity:0.65;
      filter: saturate(1.2) brightness(1.05);
    }

    body::before{
      left:0;
      background-image: var(--flower-img);
    }

    body::after{
      right:0;
      background-image: var(--flower-img);
      transform: scaleX(-1);
    }

    @media (max-width:1100px){
      body::before, body::after{ display:none; }
    }

    /* Header */
    header.topbar{
      background: linear-gradient(90deg, #345a96, #203656);
      color:#fff; padding:24px 0 8px;
      box-shadow:0 10px 20px rgba(0,0,0,0.12);
      position: sticky; top:0; z-index:100;
    }

    .wrap{ max-width:var(--max-width); margin:0 auto; padding:0 20px; }
    .title{ text-align:center; font-size:28px; font-weight:700; }

    nav.global{
      display:flex; justify-content:center; gap:10px;
      padding:10px 8px; background: rgba(0,0,0,0.06); flex-wrap:wrap;
    }
    nav.global a{ color:#fff; text-decoration:none; padding:6px 10px; border-radius:6px; font-weight:600; }
    nav.global a:hover{ background: rgba(255,255,255,0.10); }

    /* Layout */
    main.container{
      max-width:var(--max-width);
      margin:26px auto 60px;
      padding:0 20px;
      display:grid;
      grid-template-columns:260px 1fr 320px;
      gap:24px;
      align-items:start;
    }
    @media (max-width:1100px){
      main.container{ grid-template-columns: 1fr; }
    }

    /* Section cards */
    .section-card{
      background:var(--card);
      border-radius:12px;
      padding:18px;
      margin-bottom:20px;
      box-shadow:0 8px 24px rgba(40,10,30,0.05);
      border:1px solid rgba(0,0,0,0.04);
    }
    .section-card h2{
      margin-top:0;
      color:var(--accent2);
      font-size:18px;
      border-bottom:1px dashed rgba(0,0,0,0.08);
      padding-bottom:8px;
    }

    /* PROFILE BOX */
    .profile .img{
      width:100%; height:260px;
      overflow:hidden;
      border-radius:12px;
      display:flex; align-items:center; justify-content:center;
      background:linear-gradient(180deg,#fff,#e8eef7);
    }
    .profile .img img{
      width:220px; height:220px;
      object-fit:cover;
      border-radius:50%;
      box-shadow:0 6px 18px rgba(0,0,0,0.15);
      border:6px solid rgba(255,255,255,0.8);
    }
    .profile h3{ text-align:center; margin:12px 0 6px; font-size:18px; }
    .profile p.meta{ text-align:center; font-size:13px; color:var(--muted); line-height:1.4; }

    /* World map */
    #map{
      width:100%; height:320px;
      border-radius:10px;
      border:1px solid rgba(0,0,0,0.06);
    }

    .small{ font-size:13px; color:var(--muted); }
    .btn{
      background:var(--accent1);
      color:white;
      padding:8px 12px;
      border-radius:8px;
      border:none;
      cursor:pointer;
    }
  </style>
</head>

<body>

<header class="topbar">
  <div class="wrap">
    <div class="title">Welcome to My Webpage</div>
  </div>

  <nav class="global">
    <a href="#home">Home</a>
    <a href="#about">About</a>
    <a href="#education">Education</a>
    <a href="#experience">Experience</a>
    <a href="#teaching">Teaching</a>
    <a href="#courses">Courses</a>
    <a href="#resume">Resume</a>
    <a href="#publications">Publications</a>
    <a href="#projects">Projects</a>
    <a href="#skills">Skills</a>
    <a href="#awards">Awards</a>
    <a href="#talks">Talks</a>
    <a href="#services">Services</a>
    <a href="#blog">Blog</a>
    <a href="#memory">Memory</a>
    <a href="#contact">Contact</a>
    <a href="#updates">Updates</a>
    <a href="#jobs">Job Updates</a>
  </nav>
</header>

<main class="container">

  <!-- LEFT PROFILE -->
  <aside class="left-col">
    <div class="profile section-card">
      <div class="img">
        <img src="images/subrata_profile_circle_HD_new.png" alt="Subrata Pramanik">
      </div>

      <h3>Subrata Pramanik</h3>
      <p class="meta">
        Junior Research Fellow<br>
        M.Tech – Ph.D.<br>
        Indian Institute of Information Technology Allahabad<br>
        <span class="small">Contact: +91-your-phone • your-email@example.com</span>
      </p>

      <div style="margin-top:12px;">
        <div class="small">Current time</div>
        <div id="clock" style="font-weight:700; margin-top:6px;">--:--:--</div>
        <div id="date" class="small"></div>
      </div>

      <div style="margin-top:12px;">
        <div class="small">Local temperature</div>
        <div id="temperature" style="font-weight:700; margin-top:6px;">Loading...</div>
        <div class="small">(Uses browser location — no API key)</div>
      </div>
    </div>


        <!-- QUICK LINKS -->
    <div class="section-card" style="margin-top:14px;">
      <h2>Quick Links</h2>
      <ul>
        <li><a href="#resume">Resume</a></li>
        <li><a href="#publications">Publications</a></li>
        <li><a href="#projects">Projects</a></li>
        <li><a href="#contact">Contact</a></li>
      </ul>
    </div>
  </aside>

  <!-- CENTER CONTENT -->
  <section class="center-col">

    <section id="home" class="section-card">
      <h2>Home</h2>
      <p>Welcome — I am <strong>Subrata Pramanik</strong>, M.Tech – Ph.D. (IIIT Allahabad). This page shows my profile, publications, projects, gallery, updates & job posts.</p>
    </section>

    <section id="about" class="section-card"><h2>About</h2><p>Add your bio here…</p></section>
    <section id="education" class="section-card"><h2>Education</h2><ul><li>M.Tech – IIIT Allahabad</li><li>Ph.D – IIIT Allahabad</li></ul></section>
    <section id="experience" class="section-card"><h2>Experience</h2><p>Junior Research Fellow — Current</p></section>
    <section id="teaching" class="section-card"><h2>Teaching</h2></section>
    <section id="courses" class="section-card"><h2>Courses</h2></section>
    <section id="resume" class="section-card"><h2>Resume</h2><p><a href="#" download>Download Resume (PDF)</a></p></section>
    <section id="publications" class="section-card"><h2>Publications</h2></section>
    <section id="projects" class="section-card"><h2>Projects</h2></section>
    <section id="skills" class="section-card"><h2>Skills</h2></section>
    <section id="awards" class="section-card"><h2>Awards</h2></section>
    <section id="talks" class="section-card"><h2>Talks</h2></section>
    <section id="services" class="section-card"><h2>Professional Services</h2></section>
    <section id="blog" class="section-card"><h2>Blog</h2></section>

    <!-- MEMORY / GALLERY -->
    <section id="memory" class="section-card">
      <h2>Memory (Gallery)</h2>
      <div style="display:flex; gap:10px; flex-wrap:wrap;">
        <select id="year-select">
          <option>2025</option><option>2024</option><option>2023</option>
          <option>2022</option><option>2021</option>
        </select>
        <input id="image-file" type="file" accept="image/*" />
        <button class="btn" onclick="addGalleryImage()">Add</button>
      </div>
      <div id="gallery-grid" class="gallery-grid" style="margin-top:12px;"></div>
    </section>

    <!-- JOB UPDATES -->
    <section id="jobs" class="section-card">
      <h2>Job Updates</h2>

      <div style="display:flex; gap:6px; margin-bottom:8px;">
        <button class="btn" onclick="setTab('India')">India</button>
        <button class="btn" onclick="setTab('USA')">USA</button>
        <input id="search-key" placeholder="Search…" style="flex:1; padding:6px;" />
        <button class="btn" onclick="renderJobs()">Go</button>
      </div>

      <div id="job-list"></div>

      <hr/>

      <h3>Add Job</h3>
      <input id="new-title" placeholder="Title" style="width:100%; padding:6px;" />
      <input id="new-company" placeholder="Company" style="width:100%; padding:6px; margin-top:6px;" />
      <div style="display:flex; gap:6px; margin-top:6px;">
        <select id="new-country"><option>India</option><option>USA</option></select>
        <select id="new-type"><option>Intern</option><option>Full-time</option><option>Remote</option></select>
        <input id="new-location" placeholder="Location" style="flex:1;" />
      </div>

      <button class="btn" style="margin-top:8px;" onclick="addJob()">Add Job</button>
    </section>

    <!-- MAP -->
    <section class="section-card">
      <h2>World Map</h2>
      <div id="map"></div>
    </section>

    <!-- CONTACT -->
    <section id="contact" class="section-card">
      <h2>Contact</h2>
      <form onsubmit="return contactFormSubmit(event)">
        <input id="c_name" placeholder="Name" style="width:100%; padding:8px;" required />
        <input id="c_email" type="email" placeholder="Email" style="width:100%; padding:8px; margin-top:8px;" required />
        <textarea id="c_msg" rows="4" placeholder="Message" style="width:100%; padding:8px; margin-top:8px;" required></textarea>
        <button class="btn" style="margin-top:10px;">Send</button>
      </form>
    </section>

    <section id="updates" class="section-card">
      <h2>Latest Updates</h2>
    </section>

  </section>

  <!-- RIGHT SIDEBAR -->
  <aside class="right-col">
    <div class="section-card"><h2>Events</h2></div>
    <div class="section-card"><h2>Quick Weather</h2><div id="mini-weather">Loading…</div></div>
  </aside>

</main>

<!-- FOOTER -->
<footer>
  <div class="wrap">© 2025 Subrata Pramanik. All Rights Reserved.</div>
</footer>

<!-- PROFILE VIEW BELOW FOOTER -->
<div style="text-align:center; margin:20px 0; font-size:14px;">
  Profile views on this browser: <span id="view-count">0</span>
</div>

<!-- MODAL -->
<div id="modal" class="modal" onclick="closeModal(event)">
  <div class="content"><img id="modal-img" src="" /></div>
</div>

<!-- SCRIPTS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
/* CLOCK */
function updateClock(){
  const now = new Date();
  document.getElementById("clock").innerText = now.toLocaleTimeString();
  document.getElementById("date").innerText = now.toLocaleDateString();
}
setInterval(updateClock,1000);
updateClock();

/* VIEW COUNT */
let v = parseInt(localStorage.getItem("views_v2")||0);
v++;
localStorage.setItem("views_v2",v);
document.getElementById("view-count").innerText = v;

/* WEATHER */
function showWeather(lat,lon){
  fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`)
  .then(r=>r.json())
  .then(d=>{
    if(d.current_weather){
      document.getElementById("temperature").innerText = d.current_weather.temperature+"°C";
      document.getElementById("mini-weather").innerText = "Now: "+d.current_weather.temperature+"°C";
    }
  });
}
if(navigator.geolocation){
  navigator.geolocation.getCurrentPosition(pos=>{
    showWeather(pos.coords.latitude,pos.coords.longitude);
  },()=>showWeather(25.43,81.77));
}else showWeather(25.43,81.77);

/* MAP */
var map=L.map("map").setView([25.43,81.77],6);
L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(map);
L.marker([25.43,81.77]).addTo(map).bindPopup("IIIT Allahabad");

/* SIMPLE JOB SYSTEM */
let JOB_KEY="jobs_v3";
function readJobs(){ return JSON.parse(localStorage.getItem(JOB_KEY)||"[]"); }
function saveJobs(j){ localStorage.setItem(JOB_KEY,JSON.stringify(j)); }
let activeTab="India";
function setTab(t){ activeTab=t; renderJobs(); }

function renderJobs(){
  let list=document.getElementById("job-list");
  let jobs=readJobs().filter(j=>j.country===activeTab);
  let s=document.getElementById("search-key").value.toLowerCase();
  if(s) jobs=jobs.filter(j=>(j.title+j.company+j.location).toLowerCase().includes(s));
  list.innerHTML="";
  if(jobs.length===0){ list.innerHTML="<div>No jobs.</div>"; return; }
  jobs.forEach(j=>{
    let div=document.createElement("div");
    div.className="job-card";
    div.innerHTML=`<strong>${j.title}</strong><br>${j.company} • ${j.location}`;
    list.appendChild(div);
  });
}

function addJob(){
  let t=document.getElementById("new-title").value;
  let c=document.getElementById("new-company").value;
  let co=document.getElementById("new-country").value;
  let ty=document.getElementById("new-type").value;
  let l=document.getElementById("new-location").value;
  if(!t||!c){ alert("Missing fields"); return; }
  let jobs=readJobs();
  jobs.unshift({title:t,company:c,country:co,type:ty,location:l,date:Date()});
  saveJobs(jobs);
  renderJobs();
}

/* GALLERY */
function addGalleryImage(){
  let y=document.getElementById("year-select").value;
  let file=document.getElementById("image-file").files[0];
  if(!file){ alert("Choose an image."); return; }
  let r=new FileReader();
  r.onload=e=>{
    let arr=JSON.parse(localStorage.getItem("gallery_v2")||"[]");
    arr.unshift({year:y,data:e.target.result});
    localStorage.setItem("gallery_v2",JSON.stringify(arr));
    renderGallery();
  };
  r.readAsDataURL(file);
}

function renderGallery(){
  let y=document.getElementById("year-select").value;
  let arr=JSON.parse(localStorage.getItem("gallery_v2")||"[]");
  let grid=document.getElementById("gallery-grid");
  grid.innerHTML="";
  arr.filter(x=>x.year===y).forEach(x=>{
    let div=document.createElement("div");
    div.className="gallery-item";
    div.innerHTML=`<img src="${x.data}" onclick="openModal('${x.data}')">`;
    grid.appendChild(div);
  });
}
renderGallery();

function openModal(src){
  document.getElementById("modal-img").src=src;
  document.getElementById("modal").style.display="flex";
}
function closeModal(){ document.getElementById("modal").style.display="none"; }

/* CONTACT */
function contactFormSubmit(e){
  e.preventDefault();
  alert("Message received (demo).");
  return false;
}
</script>

</body>
</html>
